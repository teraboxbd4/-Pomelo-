<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Click2Cash - এডমিন প্যানেল</title>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Google Fonts for Bengali -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Noto Sans Bengali', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: #fff;
            min-height: 100vh;
        }

        /* Glassmorphism Effect */
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        /* Button Styles */
        .btn-primary {
            background: linear-gradient(135deg, #00CED1, #20B2AA);
            color: white;
            border-radius: 12px;
            padding: 12px 20px;
            font-weight: bold;
            transition: all 0.3s ease;
            border: none;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(0, 206, 209, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 206, 209, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff6b6b, #ff5252);
            color: white;
            border-radius: 12px;
            padding: 12px 20px;
            font-weight: bold;
            transition: all 0.3s ease;
            border: none;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
        }

        .btn-danger:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #06d6a0, #04a777);
            color: white;
            border-radius: 12px;
            padding: 12px 20px;
            font-weight: bold;
            transition: all 0.3s ease;
            border: none;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(6, 214, 160, 0.3);
        }

        .btn-success:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(6, 214, 160, 0.4);
        }

        /* Table Styles */
        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            overflow: hidden;
        }

        th, td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        th {
            background: rgba(255, 255, 255, 0.2);
            font-weight: 600;
        }

        tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: rgba(30, 41, 59, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 24px;
            width: 90%;
            max-width: 500px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            animation: modalAppear 0.3s ease-out;
        }

        @keyframes modalAppear {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        /* Input Fields */
        input, select, textarea {
            background: rgba(255, 255, 255, 0.1) !important;
            backdrop-filter: blur(10px);
            border-radius: 12px !important;
            border: 1px solid rgba(255, 255, 255, 0.2) !important;
            color: white !important;
            transition: all 0.3s ease;
            width: 100%;
            padding: 12px;
        }

        input:focus, select:focus, textarea:focus {
            background: rgba(255, 255, 255, 0.15) !important;
            border-color: #00CED1 !important;
            box-shadow: 0 0 0 3px rgba(0, 206, 209, 0.2) !important;
        }

        input::placeholder, textarea::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        /* Stats Cards */
        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-5px);
        }

        /* Mobile Sidebar */
        .mobile-sidebar {
            position: fixed;
            top: 0;
            left: -280px;
            width: 280px;
            height: 100%;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            transition: left 0.3s ease;
            z-index: 1000;
            padding: 20px;
            overflow-y: auto;
        }

        .mobile-sidebar.active {
            left: 0;
        }

        .main-content {
            padding: 20px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            margin-bottom: 8px;
            border-radius: 12px;
            transition: all 0.3s ease;
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
        }

        .nav-item.active {
            background: rgba(0, 206, 209, 0.2);
            color: #00CED1;
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .nav-item i {
            margin-right: 12px;
            font-size: 18px;
        }

        /* Content Sections */
        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
        }

        /* Status Badges */
        .status-pending {
            background: rgba(255, 193, 7, 0.2);
            color: #ffc107;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-approved {
            background: rgba(40, 167, 69, 0.2);
            color: #28a745;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-rejected {
            background: rgba(220, 53, 69, 0.2);
            color: #dc3545;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        /* Mobile Header */
        .mobile-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Mobile Menu Button */
        .menu-btn {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }

        /* Overlay for mobile sidebar */
        .sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            display: none;
        }

        .sidebar-overlay.active {
            display: block;
        }

        /* Responsive Design */
        @media (min-width: 768px) {
            .mobile-header {
                display: none;
            }
            
            .mobile-sidebar {
                position: fixed;
                left: 0;
                width: 250px;
            }
            
            .main-content {
                margin-left: 250px;
            }
        }
    </style>
</head>
<body>
    <!-- Auth Section -->
    <div id="auth-section" class="flex justify-center items-center min-h-screen p-4">
        <div class="glass-card p-8 w-full max-w-md">
            <h2 class="text-2xl font-bold mb-6 text-center">এডমিন লগ ইন</h2>
            <form id="login-form">
                <div class="mb-4">
                    <label class="block mb-2">ইমেইল</label>
                    <input type="email" id="login-email" class="w-full p-3 rounded-lg" required>
                </div>
                <div class="mb-6">
                    <label class="block mb-2">পাসওয়ার্ড</label>
                    <input type="password" id="login-password" class="w-full p-3 rounded-lg" required>
                </div>
                <button type="submit" class="btn-primary w-full py-3">
                    লগ ইন
                </button>
            </form>
        </div>
    </div>

    <!-- Main Admin Panel -->
    <div id="main-admin" class="hidden">
        <!-- Mobile Header -->
        <div class="mobile-header">
            <button class="menu-btn" id="menu-toggle">
                <i class="fas fa-bars"></i>
            </button>
            <div class="flex items-center">
                <div class="w-8 h-8 rounded-full bg-cyan-500 flex items-center justify-center text-white font-bold mr-2">
                    <i class="fas fa-crown"></i>
                </div>
                <div>
                    <h2 class="font-bold">Click2Cash</h2>
                </div>
            </div>
            <div></div> <!-- Empty div for spacing -->
        </div>

        <!-- Mobile Sidebar -->
        <div class="mobile-sidebar">
            <div class="flex items-center mb-8">
                <div class="w-10 h-10 rounded-full bg-cyan-500 flex items-center justify-center text-white font-bold mr-3">
                    <i class="fas fa-crown"></i>
                </div>
                <div>
                    <h2 class="font-bold">Click2Cash</h2>
                    <p class="text-sm text-cyan-400">এডমিন প্যানেল</p>
                </div>
            </div>

            <div class="nav-items">
                <div class="nav-item active" data-section="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>ড্যাশবোর্ড</span>
                </div>
                <div class="nav-item" data-section="users">
                    <i class="fas fa-users"></i>
                    <span>ব্যবহারকারী</span>
                </div>
                <div class="nav-item" data-section="withdrawals">
                    <i class="fas fa-money-bill-wave"></i>
                    <span>উত্তোলন অনুরোধ</span>
                </div>
                <div class="nav-item" data-section="tasks">
                    <i class="fas fa-tasks"></i>
                    <span>টাস্ক ম্যানেজমেন্ট</span>
                </div>
                <div class="nav-item" data-section="ads">
                    <i class="fas fa-ad"></i>
                    <span>বিজ্ঞাপন ম্যানেজমেন্ট</span>
                </div>
                <div class="nav-item" data-section="notifications">
                    <i class="fas fa-bell"></i>
                    <span>নোটিফিকেশন</span>
                </div>
                <div class="nav-item" data-section="settings">
                    <i class="fas fa-cog"></i>
                    <span>সেটিংস</span>
                </div>
                <div class="nav-item mt-8" id="logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>লগ আউট</span>
                </div>
            </div>
        </div>

        <!-- Sidebar Overlay -->
        <div class="sidebar-overlay" id="sidebar-overlay"></div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Dashboard Section -->
            <section id="dashboard" class="content-section active">
                <h1 class="text-3xl font-bold mb-6">ড্যাশবোর্ড</h1>
                
                <!-- Stats Overview -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
                    <div class="stat-card">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="text-gray-300">মোট ব্যবহারকারী</p>
                                <p class="text-3xl font-bold mt-2" id="total-users">0</p>
                            </div>
                            <i class="fas fa-users text-3xl text-cyan-400"></i>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="text-gray-300">মোট আয়</p>
                                <p class="text-3xl font-bold mt-2">৳<span id="total-earnings">0.00</span></p>
                            </div>
                            <i class="fas fa-money-bill-wave text-3xl text-green-400"></i>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="text-gray-300">পেন্ডিং উত্তোলন</p>
                                <p class="text-3xl font-bold mt-2" id="pending-withdrawals">0</p>
                            </div>
                            <i class="fas fa-clock text-3xl text-yellow-400"></i>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="text-gray-300">আজকের রেজিস্ট্রেশন</p>
                                <p class="text-3xl font-bold mt-2" id="today-registrations">0</p>
                            </div>
                            <i class="fas fa-user-plus text-3xl text-blue-400"></i>
                        </div>
                    </div>
                </div>

                <!-- Recent Activities -->
                <div class="glass-card p-4 mb-8">
                    <h2 class="text-xl font-bold mb-4">সাম্প্রতিক কার্যক্রম</h2>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>ব্যবহারকারী</th>
                                    <th>কার্যক্রম</th>
                                    <th>পরিমাণ</th>
                                    <th>সময়</th>
                                </tr>
                            </thead>
                            <tbody id="recent-activities">
                                <!-- Activities will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="glass-card p-4">
                    <h2 class="text-xl font-bold mb-4">দ্রুত কাজ</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <button id="add-task-btn" class="btn-primary py-3">
                            <i class="fas fa-plus mr-2"></i>নতুন টাস্ক
                        </button>
                        <button id="add-ad-btn" class="btn-success py-3">
                            <i class="fas fa-ad mr-2"></i>নতুন বিজ্ঞাপন
                        </button>
                        <button id="send-notification-btn" class="btn-primary py-3">
                            <i class="fas fa-bell mr-2"></i>নোটিফিকেশন
                        </button>
                    </div>
                </div>
            </section>

            <!-- Users Section -->
            <section id="users" class="content-section">
                <div class="flex flex-col md:flex-row md:justify-between md:items-center mb-6 gap-4">
                    <h1 class="text-3xl font-bold">ব্যবহারকারী ম্যানেজমেন্ট</h1>
                    <div class="flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-4">
                        <input type="text" id="user-search" placeholder="ব্যবহারকারী খুঁজুন..." class="p-2 rounded-lg">
                        <button id="refresh-users" class="btn-primary">
                            <i class="fas fa-sync-alt mr-2"></i>রিফ্রেশ
                        </button>
                    </div>
                </div>

                <div class="glass-card p-4">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>নাম</th>
                                    <th>ইমেইল</th>
                                    <th>ব্যালেন্স</th>
                                    <th>মোট আয়</th>
                                    <th>রেফারেল</th>
                                    <th>যোগদান তারিখ</th>
                                    <th>কর্ম</th>
                                </tr>
                            </thead>
                            <tbody id="users-list">
                                <!-- Users will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Withdrawals Section -->
            <section id="withdrawals" class="content-section">
                <h1 class="text-3xl font-bold mb-6">উত্তোলন অনুরোধ</h1>

                <div class="glass-card p-4">
                    <div class="flex flex-wrap mb-4 gap-2">
                        <button class="filter-btn active" data-status="all">সব</button>
                        <button class="filter-btn" data-status="pending">পেন্ডিং</button>
                        <button class="filter-btn" data-status="approved">অনুমোদিত</button>
                        <button class="filter-btn" data-status="rejected">বাতিল</button>
                    </div>

                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>ব্যবহারকারী</th>
                                    <th>পরিমাণ</th>
                                    <th>পদ্ধতি</th>
                                    <th>নম্বর</th>
                                    <th>স্ট্যাটাস</th>
                                    <th>তারিখ</th>
                                    <th>কর্ম</th>
                                </tr>
                            </thead>
                            <tbody id="withdrawals-list">
                                <!-- Withdrawals will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Tasks Section -->
            <section id="tasks" class="content-section">
                <div class="flex flex-col md:flex-row md:justify-between md:items-center mb-6 gap-4">
                    <h1 class="text-3xl font-bold">টাস্ক ম্যানেজমেন্ট</h1>
                    <button id="add-task-btn-2" class="btn-primary">
                        <i class="fas fa-plus mr-2"></i>নতুন টাস্ক
                    </button>
                </div>

                <div class="glass-card p-4">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>টাস্ক নাম</th>
                                    <th>বর্ণনা</th>
                                    <th>লিংক</th>
                                    <th>পুরস্কার</th>
                                    <th>সম্পন্ন</th>
                                    <th>স্ট্যাটাস</th>
                                    <th>কর্ম</th>
                                </tr>
                            </thead>
                            <tbody id="tasks-list">
                                <!-- Tasks will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Ads Section -->
            <section id="ads" class="content-section">
                <div class="flex flex-col md:flex-row md:justify-between md:items-center mb-6 gap-4">
                    <h1 class="text-3xl font-bold">বিজ্ঞাপন ম্যানেজমেন্ট</h1>
                    <button id="add-ad-btn-2" class="btn-primary">
                        <i class="fas fa-plus mr-2"></i>নতুন বিজ্ঞাপন
                    </button>
                </div>

                <div class="glass-card p-4">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>বিজ্ঞাপনের নাম</th>
                                    <th>লিংক</th>
                                    <th>পুরস্কার</th>
                                    <th>ক্লিক</th>
                                    <th>স্ট্যাটাস</th>
                                    <th>তারিখ</th>
                                    <th>কর্ম</th>
                                </tr>
                            </thead>
                            <tbody id="ads-list">
                                <!-- Ads will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Notifications Section -->
            <section id="notifications" class="content-section">
                <div class="flex flex-col md:flex-row md:justify-between md:items-center mb-6 gap-4">
                    <h1 class="text-3xl font-bold">নোটিফিকেশন ম্যানেজমেন্ট</h1>
                    <button id="send-notification-btn-2" class="btn-primary">
                        <i class="fas fa-bell mr-2"></i>নতুন নোটিফিকেশন
                    </button>
                </div>

                <div class="glass-card p-4">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>শিরোনাম</th>
                                    <th>বার্তা</th>
                                    <th>প্রাপক</th>
                                    <th>তারিখ</th>
                                    <th>কর্ম</th>
                                </tr>
                            </thead>
                            <tbody id="notifications-list">
                                <!-- Notifications will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settings" class="content-section">
                <h1 class="text-3xl font-bold mb-6">সিস্টেম সেটিংস</h1>

                <div class="glass-card p-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <!-- App Settings -->
                        <div>
                            <h2 class="text-xl font-bold mb-4">অ্যাপ সেটিংস</h2>
                            
                            <div class="mb-4">
                                <label class="block mb-2">সাইটের নাম</label>
                                <input type="text" id="site-name" class="p-3 rounded-lg" value="Click2Cash">
                            </div>
                            
                            <div class="mb-4">
                                <label class="block mb-2">ন্যূনতম উত্তোলন</label>
                                <input type="number" id="min-withdrawal" class="p-3 rounded-lg" value="50">
                            </div>
                            
                            <div class="mb-4">
                                <label class="block mb-2">প্রতিদিন স্পিন সীমা</label>
                                <input type="number" id="daily-spin-limit" class="p-3 rounded-lg" value="3">
                            </div>
                            
                            <div class="mb-4">
                                <label class="block mb-2">রেফারেল বোনাস</label>
                                <input type="number" id="referral-bonus" class="p-3 rounded-lg" value="5">
                            </div>
                            
                            <button id="save-settings" class="btn-primary w-full py-3">
                                সেটিংস সংরক্ষণ করুন
                            </button>
                        </div>

                        <!-- Admin Settings -->
                        <div>
                            <h2 class="text-xl font-bold mb-4">এডমিন সেটিংস</h2>
                            
                            <div class="mb-4">
                                <label class="block mb-2">নতুন এডমিন ইমেইল</label>
                                <input type="email" id="new-admin-email" class="p-3 rounded-lg" placeholder="ইমেইল ঠিকানা">
                            </div>
                            
                            <div class="mb-4">
                                <label class="block mb-2">পাসওয়ার্ড পরিবর্তন</label>
                                <input type="password" id="new-password" class="p-3 rounded-lg mb-2" placeholder="নতুন পাসওয়ার্ড">
                                <input type="password" id="confirm-password" class="p-3 rounded-lg" placeholder="পাসওয়ার্ড নিশ্চিত করুন">
                            </div>
                            
                            <button id="add-admin" class="btn-success w-full py-3 mb-4">
                                এডমিন যোগ করুন
                            </button>
                            
                            <button id="change-password" class="btn-primary w-full py-3">
                                পাসওয়ার্ড পরিবর্তন করুন
                            </button>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- Add Task Modal -->
    <div id="task-modal" class="modal">
        <div class="modal-content">
            <h2 class="text-xl font-bold mb-4">নতুন টাস্ক যোগ করুন</h2>
            <form id="task-form">
                <div class="mb-4">
                    <label class="block mb-2">টাস্ক নাম</label>
                    <input type="text" id="task-name" class="p-3 rounded-lg" required>
                </div>
                
                <div class="mb-4">
                    <label class="block mb-2">বর্ণনা</label>
                    <textarea id="task-description" class="p-3 rounded-lg" rows="3" required></textarea>
                </div>
                
                <div class="mb-4">
                    <label class="block mb-2">লিংক</label>
                    <input type="url" id="task-link" class="p-3 rounded-lg" placeholder="https://example.com" required>
                </div>
                
                <div class="mb-4">
                    <label class="block mb-2">পুরস্কার (৳)</label>
                    <input type="number" id="task-reward" class="p-3 rounded-lg" step="0.01" required>
                </div>
                
                <div class="mb-4">
                    <label class="block mb-2">আইকন</label>
                    <select id="task-icon" class="p-3 rounded-lg" required>
                        <option value="fas fa-tasks">সাধারণ টাস্ক</option>
                        <option value="fab fa-youtube">ইউটিউব</option>
                        <option value="fab fa-facebook">ফেসবুক</option>
                        <option value="fab fa-instagram">ইনস্টাগ্রাম</option>
                        <option value="fab fa-twitter">টুইটার</option>
                        <option value="fas fa-download">ডাউনলোড</option>
                        <option value="fas fa-share">শেয়ার</option>
                        <option value="fas fa-comment">কমেন্ট</option>
                    </select>
                </div>
                
                <div class="flex justify-between mt-6">
                    <button type="button" id="cancel-task" class="px-4 py-2 bg-gray-500 text-white rounded-lg">বাতিল</button>
                    <button type="submit" class="px-4 py-2 bg-green-500 text-white rounded-lg">সংরক্ষণ করুন</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Ad Modal -->
    <div id="ad-modal" class="modal">
        <div class="modal-content">
            <h2 class="text-xl font-bold mb-4">নতুন বিজ্ঞাপন যোগ করুন</h2>
            <form id="ad-form">
                <div class="mb-4">
                    <label class="block mb-2">বিজ্ঞাপনের নাম</label>
                    <input type="text" id="ad-name" class="p-3 rounded-lg" required>
                </div>
                
                <div class="mb-4">
                    <label class="block mb-2">বিজ্ঞাপন লিংক</label>
                    <input type="url" id="ad-link" class="p-3 rounded-lg" placeholder="https://example.com" required>
                </div>
                
                <div class="mb-4">
                    <label class="block mb-2">পুরস্কার (৳)</label>
                    <input type="number" id="ad-reward" class="p-3 rounded-lg" step="0.01" required>
                </div>
                
                <div class="mb-4">
                    <label class="block mb-2">বিজ্ঞাপন আইকন</label>
                    <select id="ad-icon" class="p-3 rounded-lg" required>
                        <option value="fas fa-ad">সাধারণ বিজ্ঞাপন</option>
                        <option value="fab fa-google">গুগল</option>
                        <option value="fab fa-amazon">আমাজন</option>
                        <option value="fab fa-facebook">ফেসবুক</option>
                        <option value="fab fa-youtube">ইউটিউব</option>
                        <option value="fas fa-shopping-cart">শপিং</option>
                        <option value="fas fa-gamepad">গেম</option>
                    </select>
                </div>
                
                <div class="flex justify-between mt-6">
                    <button type="button" id="cancel-ad" class="px-4 py-2 bg-gray-500 text-white rounded-lg">বাতিল</button>
                    <button type="submit" class="px-4 py-2 bg-green-500 text-white rounded-lg">সংরক্ষণ করুন</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Send Notification Modal -->
    <div id="notification-modal" class="modal">
        <div class="modal-content">
            <h2 class="text-xl font-bold mb-4">নতুন নোটিফিকেশন পাঠান</h2>
            <form id="notification-form">
                <div class="mb-4">
                    <label class="block mb-2">প্রাপক</label>
                    <select id="notification-recipient" class="p-3 rounded-lg" required>
                        <option value="all">সকল ব্যবহারকারী</option>
                        <option value="specific">নির্দিষ্ট ব্যবহারকারী</option>
                    </select>
                </div>
                
                <div class="mb-4 hidden" id="specific-user-container">
                    <label class="block mb-2">ব্যবহারকারী নির্বাচন করুন</label>
                    <select id="specific-user" class="p-3 rounded-lg">
                        <!-- Users will be populated by JavaScript -->
                    </select>
                </div>
                
                <div class="mb-4">
                    <label class="block mb-2">শিরোনাম</label>
                    <input type="text" id="notification-title" class="p-3 rounded-lg" required>
                </div>
                
                <div class="mb-4">
                    <label class="block mb-2">বার্তা</label>
                    <textarea id="notification-message" class="p-3 rounded-lg" rows="4" required></textarea>
                </div>
                
                <div class="flex justify-between mt-6">
                    <button type="button" id="cancel-notification" class="px-4 py-2 bg-gray-500 text-white rounded-lg">বাতিল</button>
                    <button type="submit" class="px-4 py-2 bg-green-500 text-white rounded-lg">পাঠান</button>
                </div>
            </form>
        </div>
    </div>

    <!-- User Edit Modal -->
    <div id="user-modal" class="modal">
        <div class="modal-content">
            <h2 class="text-xl font-bold mb-4">ব্যবহারকারী সম্পাদনা</h2>
            <form id="user-form">
                <input type="hidden" id="edit-user-id">
                
                <div class="mb-4">
                    <label class="block mb-2">নাম</label>
                    <input type="text" id="edit-user-name" class="p-3 rounded-lg" required>
                </div>
                
                <div class="mb-4">
                    <label class="block mb-2">ইমেইল</label>
                    <input type="email" id="edit-user-email" class="p-3 rounded-lg" required>
                </div>
                
                <div class="mb-4">
                    <label class="block mb-2">ব্যালেন্স (৳)</label>
                    <input type="number" id="edit-user-balance" class="p-3 rounded-lg" step="0.01" required>
                </div>
                
                <div class="mb-4">
                    <label class="block mb-2">রেফারেল সংখ্যা</label>
                    <input type="number" id="edit-user-referrals" class="p-3 rounded-lg" required>
                </div>
                
                <div class="flex justify-between mt-6">
                    <button type="button" id="cancel-user" class="px-4 py-2 bg-gray-500 text-white rounded-lg">বাতিল</button>
                    <button type="submit" class="px-4 py-2 bg-green-500 text-white rounded-lg">সংরক্ষণ করুন</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAdqZJ_ydfy05zqmJ4uauR_HluPTJDTv3s",
            authDomain: "click2cash-89436.firebaseapp.com",
            databaseURL: "https://click2cash-89436-default-rtdb.firebaseio.com",
            projectId: "click2cash-89436",
            storageBucket: "click2cash-89436.firebasestorage.app",
            messagingSenderId: "884760732782",
            appId: "1:884760732782:web:44680c2b4eabd2ae1cb27f"
        };

        // Firebase Initialization
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Global Variables
        let currentUser = null;
        let adminData = null;

        // Admin Authentication
        const adminEmails = ['dinalaminha@gmail.com']; // Add your admin emails here

        function isAdmin(email) {
            return adminEmails.includes(email);
        }

        function showAuthSection() {
            document.getElementById('auth-section').classList.remove('hidden');
            document.getElementById('main-admin').classList.add('hidden');
        }

        function showMainAdmin() {
            document.getElementById('auth-section').classList.add('hidden');
            document.getElementById('main-admin').classList.remove('hidden');
        }

        // Mobile Menu Toggle
        document.getElementById('menu-toggle').addEventListener('click', function() {
            document.querySelector('.mobile-sidebar').classList.toggle('active');
            document.getElementById('sidebar-overlay').classList.toggle('active');
        });

        document.getElementById('sidebar-overlay').addEventListener('click', function() {
            document.querySelector('.mobile-sidebar').classList.remove('active');
            this.classList.remove('active');
        });

        // Navigation
        document.querySelectorAll('.nav-item').forEach(item => {
            if (!item.id) { // Exclude logout button
                item.addEventListener('click', function() {
                    // Remove active class from all nav items
                    document.querySelectorAll('.nav-item').forEach(nav => {
                        nav.classList.remove('active');
                    });
                    
                    // Add active class to clicked nav item
                    this.classList.add('active');
                    
                    // Hide all content sections
                    document.querySelectorAll('.content-section').forEach(section => {
                        section.classList.remove('active');
                    });
                    
                    // Show selected content section
                    const sectionId = this.getAttribute('data-section');
                    document.getElementById(sectionId).classList.add('active');
                    
                    // Close mobile sidebar
                    document.querySelector('.mobile-sidebar').classList.remove('active');
                    document.getElementById('sidebar-overlay').classList.remove('active');
                    
                    // Load section data
                    loadSectionData(sectionId);
                });
            }
        });

        // Load Section Data
        function loadSectionData(sectionId) {
            switch(sectionId) {
                case 'dashboard':
                    loadDashboardData();
                    break;
                case 'users':
                    loadUsersData();
                    break;
                case 'withdrawals':
                    loadWithdrawalsData();
                    break;
                case 'tasks':
                    loadTasksData();
                    break;
                case 'ads':
                    loadAdsData();
                    break;
                case 'notifications':
                    loadNotificationsData();
                    break;
            }
        }

        // Dashboard Data
        async function loadDashboardData() {
            // Load total users
            const usersSnapshot = await db.collection('users').get();
            document.getElementById('total-users').textContent = usersSnapshot.size;
            
            // Load total earnings
            let totalEarnings = 0;
            usersSnapshot.forEach(doc => {
                const user = doc.data();
                totalEarnings += user.totalEarnings || 0;
            });
            document.getElementById('total-earnings').textContent = totalEarnings.toFixed(2);
            
            // Load pending withdrawals
            const withdrawalsSnapshot = await db.collection('withdrawals').where('status', '==', 'pending').get();
            document.getElementById('pending-withdrawals').textContent = withdrawalsSnapshot.size;
            
            // Load today's registrations
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const todayRegistrations = usersSnapshot.docs.filter(doc => {
                const user = doc.data();
                const joinDate = new Date(user.joinDate);
                return joinDate >= today;
            }).length;
            document.getElementById('today-registrations').textContent = todayRegistrations;
            
            // Load recent activities
            const activitiesSnapshot = await db.collection('activities')
                .orderBy('timestamp', 'desc')
                .limit(10)
                .get();
            
            const activitiesContainer = document.getElementById('recent-activities');
            activitiesContainer.innerHTML = '';
            
            if (activitiesSnapshot.empty) {
                activitiesContainer.innerHTML = '<tr><td colspan="4" class="text-center py-4">কোনো সাম্প্রতিক কার্যক্রম নেই</td></tr>';
                return;
            }
            
            activitiesSnapshot.forEach(doc => {
                const activity = doc.data();
                const activityElement = document.createElement('tr');
                activityElement.innerHTML = `
                    <td>${activity.userId}</td>
                    <td>${activity.title}</td>
                    <td>৳${activity.amount.toFixed(2)}</td>
                    <td>${new Date(activity.timestamp).toLocaleString('bn-BD')}</td>
                `;
                activitiesContainer.appendChild(activityElement);
            });
        }

        // Users Data
        async function loadUsersData() {
            const usersSnapshot = await db.collection('users').get();
            const usersContainer = document.getElementById('users-list');
            usersContainer.innerHTML = '';
            
            if (usersSnapshot.empty) {
                usersContainer.innerHTML = '<tr><td colspan="7" class="text-center py-4">কোনো ব্যবহারকারী নেই</td></tr>';
                return;
            }
            
            usersSnapshot.forEach(doc => {
                const user = doc.data();
                const userElement = document.createElement('tr');
                userElement.innerHTML = `
                    <td>${user.name}</td>
                    <td>${user.email}</td>
                    <td>৳${user.balance.toFixed(2)}</td>
                    <td>৳${user.totalEarnings.toFixed(2)}</td>
                    <td>${user.referrals}</td>
                    <td>${new Date(user.joinDate).toLocaleDateString('bn-BD')}</td>
                    <td>
                        <button class="edit-user-btn btn-primary text-sm py-1 px-3 mr-2" data-id="${doc.id}">
                            <i class="fas fa-edit mr-1"></i>এডিট
                        </button>
                        <button class="delete-user-btn btn-danger text-sm py-1 px-3" data-id="${doc.id}">
                            <i class="fas fa-trash mr-1"></i>ডিলিট
                        </button>
                    </td>
                `;
                usersContainer.appendChild(userElement);
            });
            
            // Add event listeners to edit and delete buttons
            document.querySelectorAll('.edit-user-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const userId = this.getAttribute('data-id');
                    openUserEditModal(userId);
                });
            });
            
            document.querySelectorAll('.delete-user-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const userId = this.getAttribute('data-id');
                    if (confirm('আপনি কি নিশ্চিত যে আপনি এই ব্যবহারকারীকে ডিলিট করতে চান?')) {
                        deleteUser(userId);
                    }
                });
            });
        }

        // Withdrawals Data
        async function loadWithdrawalsData() {
            const withdrawalsSnapshot = await db.collection('withdrawals').orderBy('timestamp', 'desc').get();
            const withdrawalsContainer = document.getElementById('withdrawals-list');
            withdrawalsContainer.innerHTML = '';
            
            if (withdrawalsSnapshot.empty) {
                withdrawalsContainer.innerHTML = '<tr><td colspan="7" class="text-center py-4">কোনো উত্তোলন অনুরোধ নেই</td></tr>';
                return;
            }
            
            withdrawalsSnapshot.forEach(doc => {
                const withdrawal = doc.data();
                const statusClass = `status-${withdrawal.status}`;
                
                const withdrawalElement = document.createElement('tr');
                withdrawalElement.innerHTML = `
                    <td>${withdrawal.userName}</td>
                    <td>৳${withdrawal.amount.toFixed(2)}</td>
                    <td>${withdrawal.method}</td>
                    <td>${withdrawal.number}</td>
                    <td><span class="${statusClass}">${withdrawal.status}</span></td>
                    <td>${new Date(withdrawal.timestamp).toLocaleDateString('bn-BD')}</td>
                    <td>
                        ${withdrawal.status === 'pending' ? `
                            <button class="approve-withdrawal btn-success text-sm py-1 px-3 mr-2" data-id="${doc.id}">
                                <i class="fas fa-check mr-1"></i>অনুমোদন
                            </button>
                            <button class="reject-withdrawal btn-danger text-sm py-1 px-3" data-id="${doc.id}">
                                <i class="fas fa-times mr-1"></i>বাতিল
                            </button>
                        ` : ''}
                    </td>
                `;
                withdrawalsContainer.appendChild(withdrawalElement);
            });
            
            // Add event listeners to approve and reject buttons
            document.querySelectorAll('.approve-withdrawal').forEach(btn => {
                btn.addEventListener('click', function() {
                    const withdrawalId = this.getAttribute('data-id');
                    updateWithdrawalStatus(withdrawalId, 'approved');
                });
            });
            
            document.querySelectorAll('.reject-withdrawal').forEach(btn => {
                btn.addEventListener('click', function() {
                    const withdrawalId = this.getAttribute('data-id');
                    updateWithdrawalStatus(withdrawalId, 'rejected');
                });
            });
        }

        // Tasks Data
        async function loadTasksData() {
            const tasksSnapshot = await db.collection('tasks').get();
            const tasksContainer = document.getElementById('tasks-list');
            tasksContainer.innerHTML = '';
            
            if (tasksSnapshot.empty) {
                tasksContainer.innerHTML = '<tr><td colspan="7" class="text-center py-4">কোনো টাস্ক নেই</td></tr>';
                return;
            }
            
            tasksSnapshot.forEach(doc => {
                const task = doc.data();
                const statusText = task.status === 'active' ? 'সক্রিয়' : 'নিষ্ক্রিয়';
                const statusClass = task.status === 'active' ? 'status-approved' : 'status-rejected';
                
                const taskElement = document.createElement('tr');
                taskElement.innerHTML = `
                    <td>${task.name}</td>
                    <td>${task.description}</td>
                    <td><a href="${task.link}" target="_blank" class="text-cyan-400">${task.link}</a></td>
                    <td>৳${task.reward.toFixed(2)}</td>
                    <td>${task.completions || 0}</td>
                    <td><span class="${statusClass}">${statusText}</span></td>
                    <td>
                        <button class="edit-task-btn btn-primary text-sm py-1 px-3 mr-2" data-id="${doc.id}">
                            <i class="fas fa-edit mr-1"></i>এডিট
                        </button>
                        <button class="toggle-task-btn ${task.status === 'active' ? 'btn-danger' : 'btn-success'} text-sm py-1 px-3" data-id="${doc.id}" data-status="${task.status}">
                            <i class="fas ${task.status === 'active' ? 'fa-pause' : 'fa-play'} mr-1"></i>${task.status === 'active' ? 'নিষ্ক্রিয়' : 'সক্রিয়'}
                        </button>
                    </td>
                `;
                tasksContainer.appendChild(taskElement);
            });
            
            // Add event listeners to edit and toggle buttons
            document.querySelectorAll('.edit-task-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const taskId = this.getAttribute('data-id');
                    openTaskEditModal(taskId);
                });
            });
            
            document.querySelectorAll('.toggle-task-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const taskId = this.getAttribute('data-id');
                    const currentStatus = this.getAttribute('data-status');
                    const newStatus = currentStatus === 'active' ? 'inactive' : 'active';
                    updateTaskStatus(taskId, newStatus);
                });
            });
        }

        // Ads Data
        async function loadAdsData() {
            const adsSnapshot = await db.collection('ads').get();
            const adsContainer = document.getElementById('ads-list');
            adsContainer.innerHTML = '';
            
            if (adsSnapshot.empty) {
                adsContainer.innerHTML = '<tr><td colspan="7" class="text-center py-4">কোনো বিজ্ঞাপন নেই</td></tr>';
                return;
            }
            
            adsSnapshot.forEach(doc => {
                const ad = doc.data();
                const statusText = ad.status === 'active' ? 'সক্রিয়' : 'নিষ্ক্রিয়';
                const statusClass = ad.status === 'active' ? 'status-approved' : 'status-rejected';
                
                const adElement = document.createElement('tr');
                adElement.innerHTML = `
                    <td>${ad.name}</td>
                    <td><a href="${ad.link}" target="_blank" class="text-cyan-400">${ad.link}</a></td>
                    <td>৳${ad.reward.toFixed(2)}</td>
                    <td>${ad.clicks || 0}</td>
                    <td><span class="${statusClass}">${statusText}</span></td>
                    <td>${new Date(ad.createdAt).toLocaleDateString('bn-BD')}</td>
                    <td>
                        <button class="edit-ad-btn btn-primary text-sm py-1 px-3 mr-2" data-id="${doc.id}">
                            <i class="fas fa-edit mr-1"></i>এডিট
                        </button>
                        <button class="toggle-ad-btn ${ad.status === 'active' ? 'btn-danger' : 'btn-success'} text-sm py-1 px-3" data-id="${doc.id}" data-status="${ad.status}">
                            <i class="fas ${ad.status === 'active' ? 'fa-pause' : 'fa-play'} mr-1"></i>${ad.status === 'active' ? 'নিষ্ক্রিয়' : 'সক্রিয়'}
                        </button>
                    </td>
                `;
                adsContainer.appendChild(adElement);
            });
            
            // Add event listeners to edit and toggle buttons
            document.querySelectorAll('.edit-ad-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const adId = this.getAttribute('data-id');
                    openAdEditModal(adId);
                });
            });
            
            document.querySelectorAll('.toggle-ad-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const adId = this.getAttribute('data-id');
                    const currentStatus = this.getAttribute('data-status');
                    const newStatus = currentStatus === 'active' ? 'inactive' : 'active';
                    updateAdStatus(adId, newStatus);
                });
            });
        }

        // Notifications Data
        async function loadNotificationsData() {
            const notificationsSnapshot = await db.collection('notifications')
                .orderBy('timestamp', 'desc')
                .limit(50)
                .get();
            
            const notificationsContainer = document.getElementById('notifications-list');
            notificationsContainer.innerHTML = '';
            
            if (notificationsSnapshot.empty) {
                notificationsContainer.innerHTML = '<tr><td colspan="5" class="text-center py-4">কোনো নোটিফিকেশন নেই</td></tr>';
                return;
            }
            
            notificationsSnapshot.forEach(doc => {
                const notification = doc.data();
                const recipient = notification.userId === 'all' ? 'সকল ব্যবহারকারী' : 'নির্দিষ্ট ব্যবহারকারী';
                
                const notificationElement = document.createElement('tr');
                notificationElement.innerHTML = `
                    <td>${notification.title}</td>
                    <td>${notification.message}</td>
                    <td>${recipient}</td>
                    <td>${new Date(notification.timestamp).toLocaleString('bn-BD')}</td>
                    <td>
                        <button class="delete-notification-btn btn-danger text-sm py-1 px-3" data-id="${doc.id}">
                            <i class="fas fa-trash mr-1"></i>ডিলিট
                        </button>
                    </td>
                `;
                notificationsContainer.appendChild(notificationElement);
            });
            
            // Add event listeners to delete buttons
            document.querySelectorAll('.delete-notification-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const notificationId = this.getAttribute('data-id');
                    if (confirm('আপনি কি নিশ্চিত যে আপনি এই নোটিফিকেশনটি ডিলিট করতে চান?')) {
                        deleteNotification(notificationId);
                    }
                });
            });
        }

        // Modal Functions
        function openTaskModal() {
            document.getElementById('task-modal').style.display = 'flex';
            document.getElementById('task-form').reset();
        }

        function closeTaskModal() {
            document.getElementById('task-modal').style.display = 'none';
        }

        function openAdModal() {
            document.getElementById('ad-modal').style.display = 'flex';
            document.getElementById('ad-form').reset();
        }

        function closeAdModal() {
            document.getElementById('ad-modal').style.display = 'none';
        }

        function openNotificationModal() {
            document.getElementById('notification-modal').style.display = 'flex';
            document.getElementById('notification-form').reset();
            loadUsersForNotification();
        }

        function closeNotificationModal() {
            document.getElementById('notification-modal').style.display = 'none';
        }

        function openUserEditModal(userId) {
            db.collection('users').doc(userId).get().then(doc => {
                if (doc.exists) {
                    const user = doc.data();
                    document.getElementById('edit-user-id').value = userId;
                    document.getElementById('edit-user-name').value = user.name;
                    document.getElementById('edit-user-email').value = user.email;
                    document.getElementById('edit-user-balance').value = user.balance;
                    document.getElementById('edit-user-referrals').value = user.referrals;
                    document.getElementById('user-modal').style.display = 'flex';
                }
            });
        }

        function closeUserModal() {
            document.getElementById('user-modal').style.display = 'none';
        }

        // Load users for notification dropdown
        async function loadUsersForNotification() {
            const usersSnapshot = await db.collection('users').get();
            const userSelect = document.getElementById('specific-user');
            userSelect.innerHTML = '<option value="">ব্যবহারকারী নির্বাচন করুন</option>';
            
            usersSnapshot.forEach(doc => {
                const user = doc.data();
                const option = document.createElement('option');
                option.value = doc.id;
                option.textContent = `${user.name} (${user.email})`;
                userSelect.appendChild(option);
            });
        }

        // Event Listeners
        document.getElementById('login-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            try {
                const userCredential = await auth.signInWithEmailAndPassword(email, password);
                const user = userCredential.user;
                
                if (isAdmin(user.email)) {
                    showMainAdmin();
                    loadDashboardData();
                } else {
                    alert('আপনি এডমিন নন!');
                    auth.signOut();
                }
            } catch (error) {
                alert('লগ ইন ব্যর্থ: ' + error.message);
            }
        });

        document.getElementById('logout-btn').addEventListener('click', function() {
            if (confirm('আপনি কি নিশ্চিত যে আপনি লগ আউট করতে চান?')) {
                auth.signOut();
            }
        });

        document.getElementById('add-task-btn').addEventListener('click', openTaskModal);
        document.getElementById('add-task-btn-2').addEventListener('click', openTaskModal);
        document.getElementById('cancel-task').addEventListener('click', closeTaskModal);

        document.getElementById('add-ad-btn').addEventListener('click', openAdModal);
        document.getElementById('add-ad-btn-2').addEventListener('click', openAdModal);
        document.getElementById('cancel-ad').addEventListener('click', closeAdModal);

        document.getElementById('send-notification-btn').addEventListener('click', openNotificationModal);
        document.getElementById('send-notification-btn-2').addEventListener('click', openNotificationModal);
        document.getElementById('cancel-notification').addEventListener('click', closeNotificationModal);

        document.getElementById('cancel-user').addEventListener('click', closeUserModal);

        document.getElementById('notification-recipient').addEventListener('change', function() {
            const specificContainer = document.getElementById('specific-user-container');
            if (this.value === 'specific') {
                specificContainer.classList.remove('hidden');
            } else {
                specificContainer.classList.add('hidden');
            }
        });

        // Task Form Submission
        document.getElementById('task-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const taskData = {
                name: document.getElementById('task-name').value,
                description: document.getElementById('task-description').value,
                link: document.getElementById('task-link').value,
                reward: parseFloat(document.getElementById('task-reward').value),
                icon: document.getElementById('task-icon').value,
                status: 'active',
                completions: 0,
                createdAt: new Date().toISOString()
            };
            
            try {
                await db.collection('tasks').add(taskData);
                alert('টাস্ক সফলভাবে যোগ করা হয়েছে!');
                closeTaskModal();
                loadTasksData();
            } catch (error) {
                alert('টাস্ক যোগ করতে সমস্যা হয়েছে: ' + error.message);
            }
        });

        // Ad Form Submission
        document.getElementById('ad-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const adData = {
                name: document.getElementById('ad-name').value,
                link: document.getElementById('ad-link').value,
                reward: parseFloat(document.getElementById('ad-reward').value),
                icon: document.getElementById('ad-icon').value,
                status: 'active',
                clicks: 0,
                createdAt: new Date().toISOString()
            };
            
            try {
                await db.collection('ads').add(adData);
                alert('বিজ্ঞাপন সফলভাবে যোগ করা হয়েছে!');
                closeAdModal();
                loadAdsData();
            } catch (error) {
                alert('বিজ্ঞাপন যোগ করতে সমস্যা হয়েছে: ' + error.message);
            }
        });

        // Notification Form Submission
        document.getElementById('notification-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const recipient = document.getElementById('notification-recipient').value;
            const title = document.getElementById('notification-title').value;
            const message = document.getElementById('notification-message').value;
            const specificUser = document.getElementById('specific-user').value;
            
            try {
                if (recipient === 'all') {
                    // Send to all users
                    const usersSnapshot = await db.collection('users').get();
                    
                    usersSnapshot.forEach(async (doc) => {
                        await db.collection('notifications').add({
                            userId: doc.id,
                            title: title,
                            message: message,
                            timestamp: new Date().toISOString(),
                            read: false
                        });
                    });
                    
                    alert('নোটিফিকেশন সকল ব্যবহারকারীকে পাঠানো হয়েছে!');
                } else {
                    // Send to specific user
                    await db.collection('notifications').add({
                        userId: specificUser,
                        title: title,
                        message: message,
                        timestamp: new Date().toISOString(),
                        read: false
                    });
                    
                    alert('নোটিফিকেশন পাঠানো হয়েছে!');
                }
                
                closeNotificationModal();
                loadNotificationsData();
            } catch (error) {
                alert('নোটিফিকেশন পাঠাতে সমস্যা হয়েছে: ' + error.message);
            }
        });

        // User Form Submission
        document.getElementById('user-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const userId = document.getElementById('edit-user-id').value;
            const userData = {
                name: document.getElementById('edit-user-name').value,
                email: document.getElementById('edit-user-email').value,
                balance: parseFloat(document.getElementById('edit-user-balance').value),
                referrals: parseInt(document.getElementById('edit-user-referrals').value)
            };
            
            try {
                await db.collection('users').doc(userId).update(userData);
                alert('ব্যবহারকারীর তথ্য সফলভাবে আপডেট করা হয়েছে!');
                closeUserModal();
                loadUsersData();
            } catch (error) {
                alert('ব্যবহারকারী আপডেট করতে সমস্যা হয়েছে: ' + error.message);
            }
        });

        // Withdrawal Status Update
        async function updateWithdrawalStatus(withdrawalId, status) {
            try {
                await db.collection('withdrawals').doc(withdrawalId).update({
                    status: status,
                    processedAt: new Date().toISOString()
                });
                
                alert(`উত্তোলন অনুরোধ ${status === 'approved' ? 'অনুমোদিত' : 'বাতিল'} হয়েছে!`);
                loadWithdrawalsData();
            } catch (error) {
                alert('উত্তোলন স্ট্যাটাস আপডেট করতে সমস্যা হয়েছে: ' + error.message);
            }
        }

        // Task Status Update
        async function updateTaskStatus(taskId, status) {
            try {
                await db.collection('tasks').doc(taskId).update({
                    status: status
                });
                
                alert(`টাস্ক ${status === 'active' ? 'সক্রিয়' : 'নিষ্ক্রিয়'} হয়েছে!`);
                loadTasksData();
            } catch (error) {
                alert('টাস্ক স্ট্যাটাস আপডেট করতে সমস্যা হয়েছে: ' + error.message);
            }
        }

        // Ad Status Update
        async function updateAdStatus(adId, status) {
            try {
                await db.collection('ads').doc(adId).update({
                    status: status
                });
                
                alert(`বিজ্ঞাপন ${status === 'active' ? 'সক্রিয়' : 'নিষ্ক্রিয়'} হয়েছে!`);
                loadAdsData();
            } catch (error) {
                alert('বিজ্ঞাপন স্ট্যাটাস আপডেট করতে সমস্যা হয়েছে: ' + error.message);
            }
        }

        // Delete User
        async function deleteUser(userId) {
            try {
                await db.collection('users').doc(userId).delete();
                alert('ব্যবহারকারী সফলভাবে ডিলিট করা হয়েছে!');
                loadUsersData();
            } catch (error) {
                alert('ব্যবহারকারী ডিলিট করতে সমস্যা হয়েছে: ' + error.message);
            }
        }

        // Delete Notification
        async function deleteNotification(notificationId) {
            try {
                await db.collection('notifications').doc(notificationId).delete();
                alert('নোটিফিকেশন সফলভাবে ডিলিট করা হয়েছে!');
                loadNotificationsData();
            } catch (error) {
                alert('নোটিফিকেশন ডিলিট করতে সমস্যা হয়েছে: ' + error.message);
            }
        }

        // Auth State Listener
        auth.onAuthStateChanged((user) => {
            if (user) {
                if (isAdmin(user.email)) {
                    currentUser = user;
                    showMainAdmin();
                    loadDashboardData();
                } else {
                    alert('আপনি এডমিন নন!');
                    auth.signOut();
                }
            } else {
                currentUser = null;
                showAuthSection();
            }
        });

        // Initialize Admin Panel
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is already logged in
            auth.onAuthStateChanged((user) => {
                if (user && isAdmin(user.email)) {
                    showMainAdmin();
                    loadDashboardData();
                }
            });
        });
    </script>
</body>
</html>